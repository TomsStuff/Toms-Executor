-- Simple ESP Script for R15 Characters
-- For educational purposes only. Do not use in real games.

-- Function to create a highlight box around a part
local function createHighlightBox(part)
    local box = Instance.new("BoxHandleAdornment")
    box.Size = part.Size
    box.Color3 = Color3.new(1, 0, 0) -- Red color
    box.Transparency = 0.5
    box.AlwaysOnTop = true
    box.ZIndex = 10
    box.Adornee = part
    box.Parent = part
end

-- Function to add ESP to specific body parts of a character
local function addESP(character, ignoreTeamName)
    -- List of R15 body parts
    local bodyPartNames = {
        "Head", "Torso", "UpperTorso", "LowerTorso", 
        "LeftArm", "LeftUpperArm", "LeftLowerArm", "LeftHand", 
        "RightUpperArm", "RightLowerArm", "RightHand",
        "LeftLeg", "LeftUpperLeg", "LeftLowerLeg", "LeftFoot", 
        "RightUpperLeg", "RightLowerLeg", "RightFoot"
    }

    -- Check if the character belongs to a player in the ignore team
    local playerTeam = game.Players:GetPlayerFromCharacter(character).Team
    if playerTeam and playerTeam.Name == ignoreTeamName then
        return
    end

    for _, partName in pairs(bodyPartNames) do
        local part = character:FindFirstChild(partName)
        if part and part:IsA("BasePart") then
            createHighlightBox(part)
        end
    end
end

-- Function to process all players
local function processPlayers()
    local localPlayer = game.Players.LocalPlayer
    local localPlayerTeam = localPlayer.Team

    for _, player in pairs(game.Players:GetPlayers()) do
        if player.Character and player.Character:FindFirstChild("Humanoid") and player.Character.Humanoid.RigType == Enum.HumanoidRigType.R15 then
            -- Add ESP for other players' characters
            if player ~= localPlayer and (not localPlayerTeam or (player.Team ~= localPlayerTeam)) then
                addESP(player.Character, localPlayerTeam.Name)
            end
        end
    end
end

-- Connect function to PlayerAdded event
game.Players.PlayerAdded:Connect(function(player)
    player.CharacterAdded:Connect(function(character)
        if character:FindFirstChild("Humanoid") and character.Humanoid.RigType == Enum.HumanoidRigType.R15 then
            local localPlayer = game.Players.LocalPlayer
            local localPlayerTeam = localPlayer.Team

            -- Add ESP for the new player if they are not in the same team
            if player ~= localPlayer and (not localPlayerTeam or (player.Team ~= localPlayerTeam)) then
                addESP(character, localPlayerTeam.Name)
            end
        end
    end)
end)

-- Add ESP to existing players' characters on script start
processPlayers()

-- Periodically check for new players
while true do
    processPlayers()
    wait(10) -- Check every 10 seconds
end
